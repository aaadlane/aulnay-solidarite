{"ast":null,"code":"var _jsxFileName = \"/Users/adlane/Documents/Cours/Cours-JS/js-adlane/aulnay-solidarite/aulnay-solidarite/frontaulnay/src/components/page/UserInfos.jsx\";\nimport React, { Component } from 'react';\nimport { apiHandler } from './../../api/handler';\nconst handler = apiHandler();\nexport default class UserInfos extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      isEditMode: false,\n      first_name: \"\",\n      last_name: \"\",\n      email: \"\"\n    };\n\n    this.handleChange = e => this.setState({\n      [e.target.name]: e.target.value\n    });\n\n    this.updateUser = async e => {\n      e.preventDefault(); // classique : empêche l'event submit du formulaire de rafraîchir la page\n\n      try {\n        const apiRes = await handler.patch(\"/api/user/\" + this.props.context.currentUser._id, {\n          // ci-dessous : prend la valeur du state (si modifié) OU la valeur originale provenant de AuthContext\n          first_name: this.state.first_name || this.props.context.currentUser.first_name,\n          last_name: this.state.last_name || this.props.context.currentUser.last_name,\n          email: this.state.email || this.props.context.currentUser.email\n        });\n        this.props.context.setCurrentUser(apiRes.data); // mise à jour AuthContext avec les nouvelles infos user\n      } catch (apiErr) {\n        console.error(apiErr);\n      }\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 13\n      }\n    });\n  }\n\n}","map":{"version":3,"sources":["/Users/adlane/Documents/Cours/Cours-JS/js-adlane/aulnay-solidarite/aulnay-solidarite/frontaulnay/src/components/page/UserInfos.jsx"],"names":["React","Component","apiHandler","handler","UserInfos","state","isEditMode","first_name","last_name","email","handleChange","e","setState","target","name","value","updateUser","preventDefault","apiRes","patch","props","context","currentUser","_id","setCurrentUser","data","apiErr","console","error","render"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,UAAT,QAA2B,qBAA3B;AACA,MAAMC,OAAO,GAAGD,UAAU,EAA1B;AAGA,eAAe,MAAME,SAAN,SAAwBH,SAAxB,CAAkC;AAAA;AAAA;AAAA,SAC7CI,KAD6C,GACrC;AACJC,MAAAA,UAAU,EAAE,KADR;AAEJC,MAAAA,UAAU,EAAE,EAFR;AAGJC,MAAAA,SAAS,EAAE,EAHP;AAIJC,MAAAA,KAAK,EAAE;AAJH,KADqC;;AAAA,SAQ3CC,YAR2C,GAQ3BC,CAAD,IAAO,KAAKC,QAAL,CAAc;AAAE,OAACD,CAAC,CAACE,MAAF,CAASC,IAAV,GAAiBH,CAAC,CAACE,MAAF,CAASE;AAA5B,KAAd,CARqB;;AAAA,SAU3CC,UAV2C,GAU9B,MAAOL,CAAP,IAAa;AACxBA,MAAAA,CAAC,CAACM,cAAF,GADwB,CACJ;;AAEpB,UAAI;AACF,cAAMC,MAAM,GAAG,MAAMf,OAAO,CAACgB,KAAR,CACnB,eAAe,KAAKC,KAAL,CAAWC,OAAX,CAAmBC,WAAnB,CAA+BC,GAD3B,EAEnB;AAAE;AACAhB,UAAAA,UAAU,EAAE,KAAKF,KAAL,CAAWE,UAAX,IAAyB,KAAKa,KAAL,CAAWC,OAAX,CAAmBC,WAAnB,CAA+Bf,UADtE;AAEEC,UAAAA,SAAS,EAAE,KAAKH,KAAL,CAAWG,SAAX,IAAwB,KAAKY,KAAL,CAAWC,OAAX,CAAmBC,WAAnB,CAA+Bd,SAFpE;AAGEC,UAAAA,KAAK,EAAE,KAAKJ,KAAL,CAAWI,KAAX,IAAoB,KAAKW,KAAL,CAAWC,OAAX,CAAmBC,WAAnB,CAA+Bb;AAH5D,SAFmB,CAArB;AAQA,aAAKW,KAAL,CAAWC,OAAX,CAAmBG,cAAnB,CAAkCN,MAAM,CAACO,IAAzC,EATE,CAS8C;AACjD,OAVD,CAUE,OAAOC,MAAP,EAAe;AACfC,QAAAA,OAAO,CAACC,KAAR,CAAcF,MAAd;AACD;AACF,KA1B0C;AAAA;;AA4B7CG,EAAAA,MAAM,GAAG;AACL,wBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ;AAKH;;AAlC4C","sourcesContent":["import React, { Component } from 'react';\nimport { apiHandler } from './../../api/handler';\nconst handler = apiHandler();\n\n\nexport default class UserInfos extends Component {\n    state = {\n        isEditMode: false,\n        first_name: \"\",\n        last_name: \"\",\n        email: \"\",\n      };\n      \n      handleChange = (e) => this.setState({ [e.target.name]: e.target.value });\n\n      updateUser = async (e) => {\n        e.preventDefault(); // classique : empêche l'event submit du formulaire de rafraîchir la page\n    \n        try {\n          const apiRes = await handler.patch(\n            \"/api/user/\" + this.props.context.currentUser._id,\n            { // ci-dessous : prend la valeur du state (si modifié) OU la valeur originale provenant de AuthContext\n              first_name: this.state.first_name || this.props.context.currentUser.first_name,\n              last_name: this.state.last_name || this.props.context.currentUser.last_name,\n              email: this.state.email || this.props.context.currentUser.email,\n            }\n          );\n          this.props.context.setCurrentUser(apiRes.data); // mise à jour AuthContext avec les nouvelles infos user\n        } catch (apiErr) {\n          console.error(apiErr);\n        }\n      };\n\n    render() {\n        return (\n            <div>\n\n            </div>\n        )\n    }\n}\n"]},"metadata":{},"sourceType":"module"}